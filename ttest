using Plots

const w2 = [1 1; 1 -1]
walsh(k) = k < 2 ? w2 : kron(w2, walsh(k - 1))
countsignchanges(r) = count(i -> sign(r[i - 1]) != sign(r[i[]]), 2:lastindex(r))
sequency(m) = sortslices(m, dims=1, by = countsignchanges)

display(walsh(2))
display(walsh(3))
display(walsh(4))
display(sequency(walsh(3)))
display(sequency(walsh(4)))

heatmap(sequency(walsh(5)), ylims=[0, 33], xlims = [0, 33], aspect_ratio = :equal, legend = false, axis = false, colormap=[:red, :forestgreen], yflip=true)
