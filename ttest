""" rosettacode.org/wiki/Prime_reciprocal_sum """
using Primes
using ResumableFunctions

""" Abbreviate a large string by showing beginning / end and number of chars """
function abbreviate(s, term = "digits", thresh = 50, idx = thresh รท 2 - 3)
    w = length(s)
    return w < thresh ? s : s[begin:begin+idx] * ".." * s[end-idx:end] * " ($w $term)"
end

""" Generate OEIS A075442 """
@resumable function oeis75442()
    p, psum = 1, big"0.0"
    while true
        p = nextprime(p + 1)
        nextsum = psum + big"1.0" / p 
        if nextsum < 1
            psum = nextsum
            @yield p
        end
    end
end

foreach(n -> println(abbreviate(string(n))), Iterators.take(oeis75442(), 17))

